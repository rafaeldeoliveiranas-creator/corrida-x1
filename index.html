<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Corrida X1</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
}
canvas{
    display:block;
}
</style>
</head>

<body>
<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// --- CARRO ---
const car = new Image();
car.src = "img/car-green.png";
let carX = canvas.width / 2;
let carY = canvas.height - 200;
let targetX = carX;

// --- PISTA ---
const roadImg = new Image();
roadImg.src = "img/pista.png";
let offsetY = 0;
const velocidade = 4;

// --- CONTROLE HORIZONTAL ---
canvas.addEventListener("touchmove", (e)=>{
    targetX = e.touches[0].clientX;
});
canvas.addEventListener("mousemove", (e)=>{
    targetX = e.clientX;
});

// --- LOOP DO JOGO ---
function gameLoop(){

    // fundo preto
    ctx.fillStyle = "black";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // mover pista
    offsetY += velocidade;
    if(offsetY > canvas.height) offsetY = 0;

    // desenhar pista duas vezes para loop contÃ­nuo
    ctx.drawImage(roadImg, 0, offsetY - canvas.height, canvas.width, canvas.height);
    ctx.drawImage(roadImg, 0, offsetY, canvas.width, canvas.height);

    // mover carro horizontal suavemente
    carX += (targetX - carX) * 0.08;

    // desenhar carro
    ctx.drawImage(car, carX-40, carY-80, 80,160);

    requestAnimationFrame(gameLoop);
}

// iniciar loop quando a imagem do carro carregar
car.onload = ()=>{
    gameLoop();
};
</script>

</body>
</html>
